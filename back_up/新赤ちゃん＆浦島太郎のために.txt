&size(24){生成AI界の流れが速すぎてSDXLのビッグウェーブに元々のWikiの情報が古くなってしもうたんや}
&size(24){なんで&color(#0075c8){2024年4月時点}での流れと簡単な導入方法説明するで}

（思い立って慌てて書いたんで誤字脱字や現状認識の間違いなど多々あるんで各自訂正してくれやで）

-なんJNVA部
もともとNovelAI(略称はNAI)で画像生成する人のコミュニティだった。
その後ローカルで同等（以上）の事が出来るようになりローカルの情報交換も盛んである。
もとはなんJだったが、現在は5chのなんでも実況Uが主な活動場所となっている。

-NovelAI(NAI)
NovelAIは小説生成から始まり、2022年10月に画像生成サービスが登場。小説の挿絵をAIで生成してくれるという触れ込みだったがNSFWや版権キャラのイラストが出せると言うことで人気になった。
そのAI画像生成のための教師データから作ったモデルが流出したり法的にグレーゾーンと言われつつ現在もサービスが続いている。
ただAIゆえになかなか思うような画像を生成できず、理想の絵を生成するテクニックを有志がをまとめたものがこのwiki。
いわゆるWebサービスで、スマホやタブレットでもお手軽に使えてNAI3（SDXL)にアップデートしてから結構な画像を手軽に生成できるため一番手っ取り早い。
''&color(#ff0000){ただし有料（10USD/月から)}''
[[詳しい説明（wikipedia)~~>https://ja.wikipedia.org/wiki/NovelAI]][[NovelAIのトップページ（基本英語）>https://novelai.net/]]
※米国企業のため児ポの生成は危険

-ローカル
ローカルとは、自分のPC(クラウドで動かすことも指す場合あり)で画像を生成することを意味する。
AI生成のエンジン（Stable Diffusion）とそれを動かすための環境（Python,Git)、操作するためのUI（WebUIやComfyUI)に自分な好きなモデル（データセットからの学習結果）やLoRA（シチュエーションやキャラの特徴や画風などを再現する追加データのようなもの）を自分のPCにダウンロードして生成し放題。
多分[[impressのこの記事>https://pc.watch.impress.co.jp/docs/column/nishikawa/1568551.html]]読めばだれでも環境構築できるはず。
ただし&color(#ff0000){結構なスペックのPCが必要}。相当な量のソフトウェアをダウンロードするのでそこそこの回線も必要。
生成用のモデルも一つ7GBとか有るので制限のあるモバイル回線ではキツイと思われる。

注：Python=プログラミング言語およびそれを動かすための環境。Git=バージョン管理システムのこと。いろんなソフトのバージョンを管理してくれる仕組みとその管理ソフト本体。

&size(10){ここでおっさんからの忠告や}
&size(10){本当に初めてならその記事のその2からやろう。}
&size(10){先走っていろいろ入れそうになる前にまずはGitとPythonをインストールしてから。バージョンに注意！}
&size(10){ちなみにスレではグラボは最低3060(12GB)、余裕があるなら4090（24GB,30万円〜）が推奨。現実的な妥協点として4070Ti SUPER(16GB,13万円〜)がある。}
&size(10){''先人のありがたい言葉「欲しいときが買い時」''}
&size(10){あとVRAM少なめでも生成速度が速いforge版(WebUI)やLoRA作成を簡単にできるGUIなどのおかげで時間かかっても良いなら現行だと4060(8GBグラボのみ4万円〜)でも最低限なんとかなる}
&size(10){将来は知らんｗ}
&color(#ff0000){もし新規にPCやグラボ買うつもりなら絶対NVIDIAのRTXにするように。}
&color(#ff0000){RTX3060（12GB)からRTX4090(24GB)まで予算次第だが、推奨できないものもあるため注意。}
&color(#ff0000){宗教的な理由でRadeonやArcしか選べないなら生成AIは茨の道。}
たまにネットでN100のPCで生成できますかというヤフー民の釣りみたいなのがいるがそういう民にはNAI勧めとけ

-&size(24){''本題？''（ここから下は上記''ローカル''の''2024年4月-最新情報''や）}
ここを一新しなければならなくなった事の始まりは''Stable Diffusion''っていう大元のAI画像生成ソフトのバージョンが上がって''XL''になった。
それまで1.5が主流だったが、SDXLリリースすぐはモデルが基本(sd_xl_base_1.0)のものしか無くていまいち（特にNSFW方面で）評判が良くなかった。
基礎解像度が512x512から1024x1024、パラメータ数も3倍以上になって高品質な画像を生成できるはずだが、学習のハードウェア要件が厳しすぎて個人には手を出せない代物だった。
そんな中''現在主流になった''[[Animagine-XL-3.0>https://huggingface.co/cagliostrolab/animagine-xl-3.0]]''と''[[3.1>https://huggingface.co/cagliostrolab/animagine-xl-3.1]]''や''[[Pony Diffusion V6 XL>https://civitai.com/models/257749/pony-diffusion-v6-xl]]といったモデルが出始めて品質の高さから人気になった。そういうこともあり、今はもうほとんどのスレ民は1.5環境は使っていない。''ほんの数ヶ月で移行した。''そりゃwikiの編集も間に合わんわ(そもそも編集者がいないような)・・・
ちなみにStableDiffusionや呪文などで検索して上位に出てくるほとんどのサイトがエアプのアフィ系。書いてあることもコピペがほとんどで情報も1.5時代のものが多い。

（おまけ：Animagine作者はXLになってAnimagine-XL-3.0作るのに教師画像を集めてモデル生成するのに専用のAIサーバー(A100 80Gを二枚)を借りて500時間かかったとかなんとか
個人勢でもRTX3090を4枚とかの世界やからなかなかモデルが出なかったのもわかる）

それらのAnimagineやponyモデルが出始めるとcivitaiでは公開されてない派生の二次元向け[[ebara_pony>https://huggingface.co/tsukihara/xl_model]]やリアル系[[realpony>https://civitai.com/models/365041/real-pony]]等のモデルも広まり、過去のモデルは本当に過去のものになってしまった。大元のモデル作るのは個人では厳しいががその派生のマージモデルなら個人のハイエンドPCでなんとかできる。

そしてそこで問題になったのがPonyDiffusionV6XL（とその派生）だ。
元々AIに画像生成の指示を出すのにdanbooruタグという英語の2次元訛りみたいな単語を使っており、ここのwikiに掲載されている単語もほとんどがそう。
なぜそうなったかというと、モデルを作るのに必要な教師画像のキャプション（画像の説明文）の作成をするのだが、海外の巨大画像掲示板であるdanbooruではタグとしてそれを元々やっており教師画像集めるのに最適であり、その界隈の大手なためdanbooruタグが主流となっている。
ところがそこに彗星のように現れたPonyDiffusionV6XLというモデルがとても特殊で海外の[[MyLittlePony>https://www.tv-tokyo.co.jp/anime/mylittle-pony/sp/]]愛が強すぎる日本で言うケモナーが集まる[[e621>https://dic.pixiv.net/a/e621]]という画像掲示板を学習元にしている。
ケモナー系や正直一般日本人にはきつすぎる画像が生成されやすく当初は敬遠されていたが特にNSFWに強い（強すぎ）ことや、神聖3文字事件等を経てNSFWならponyの声もあるほどだ。
ところが指示を出すのにこれまでのdanbooruとは文化の違うe621で学習しているため、ここのwikiで紹介されとる単語とは微妙に異なる。e621タグはいわばケモナー訛りの英語だがエロだけでなくグロも多くて本家e621で単語探るのも常人にはちょっときつい。
それでも元は英語でdanbooruタグもそこそこ通じるのと自然英語もなんとなく理解してくれるが正直ここのwikiの情報との相違も大きい。
特にpromptの作法が従来とはかなり違うために現在も手探り状態。

特徴としては''Animagine系列は多くの版権キャラを内包しておりプロンプトだけでそれらのキャラを簡単に生成出来ることや背景含めきれいな絵柄で人気、いわゆる優等生''。通称兄魔神、魔神。全年齢のイラスト生成に良い。
''Pony系はそのままでは正直厳しい絵を生成するしシモの描写なども何でもありでNSFWにはとことん強い''。が背景やメカに弱い（らしい）。学習元が一般的で無いため一般的で無いものを生成するときがある。プロンプトの書き方がかなり独特。
と言われている。



-&size(24){LoRA等}

こんな感じでベースそのものが変わってしまったこともあって掲示板の住民たちは混乱している。
その中でも元々1.5時代でも正解はないと言われていたLoRA作成のセッティングもずっと議論されている。
今わかっていることは

-教師画像はかなり少なくてもどうにかなる。（どうにでもなるわけでは無くそれなりに数はそろえた方が品質はもちろん上がる）
-当たり前だが必要なハードウェア性能は上がっている（特にVRAMとメインメモリ)

また、教師画像の前処理から作成時の各種パラメーターも統一見解的なものはない。
もともとLoRAを作成するユーザーも
+雰囲気が出ればOK派
+原作忠実派
+使わせてもらうだけだが一言申したい派
その他
などで目指すものが違うため意見の相違がおさまらない。

（特にこのページを最初に書いたワイちゃんはLoRA作成に関しては赤ちゃんどころかまだマッマの子宮でやっとパッパの精子と出会ったぐらいなんや・・・スマンな
なんでLoRA関係は詳しいニキにお願いやで）

&size(18){-おまけハードウェア編}
&size(18){スレとは違う？編集者主観のローカルPCのスペックについて}
ローカルについては正直&color(#ff0000){結構なゲーミングPC並のスペックがいる}んでいきなり手を出すのはちょっとハードルが高いのが現状
最低限はBTO新品だと駿河屋10万円PCにメモリ増設（RTX4060-8GB)から上は4090で50万円超。さらにモニタや人によってはさらなるメモリ増設やSSD増設も必要。
スレではVRAM優先で3060(12GB)が最低ラインと言われているが旧製品であり新品BTO等では入手しづらくなっている。そのため普段使い（ゲームとか）と入手性を考えると4060が現時点のAI画像生成の本当の最低ラインでは無いかと思われる。またRTX4060はDLSS3（nVidiaのアップスケール、フレーム補間機能）が使えるため対応しているゲームにおいては3060よりFPS等が稼ぎやすい。AIだけなら将来的にはVRAM容量の最低ラインが上がると言われており後々8GBでは厳しいというのはネックではある。RTX4060Ti(16GB)という製品もあるがAI生成以外の性能は無印のRTX4060とそう変わらずVRAMが増えただけで価格が一気に8万前後となり悩ましい。4070シリーズはSとTiSという新しいラインが発売されVRAMもTiSならば16GBモデルがありAI以外の性能も評判が良いためここら辺が現実的ではあるが実売で13万円〜というのをどう見るかは使用者による。さらに上の4080Sシリーズ(VRAM16GBで18万円〜）になると今度は最強の4090が見えてくるため悩ましい。AIに限らずRTX4090ならば4K120Hzや8K60Hzでのゲーミングがギリギリ実用的になり、4080から大きなアドバンテージとなっている。逆に一つ下の4070TiSの評判が良いためそちらとの価格差も悩ましく判断が難しいものとなっている。結局は予算次第だがAIだけに絞るかほかの用途も考えるかですこし変わってくる。
CPUに関しては最近のもの、AI生成に限ればIntelなら12世代以降のi3やi5でも十分、AMDなら前世代のソケットAM4でRyzen5シリーズでも十分とのこと。ただしAI生成以外（ゲーム等）も考えるとグラボに合わせてCPUも良いものにしないとグラボの足を引っ張ることになる

-2024/4時点でのローカル向けPCパーツ価格相場について（編集者の主観です）
SSDは2023の6月頃に十分なスペックのHiksemi（中国）のSSDが突如激安で登場し実質価格で行けば2TBが10K円、4TBが20K円前後という価格破壊があったがその後上昇を続けさらに現在もどのメーカーのものも高騰中
HDDは8TBが13K円前後で買える時期が長かったが昨年から高騰を続けついには18K円を超える事態に
CPUも（特にAMD)は4月に爆上げしAM5のハイエンドは少しずつ価格が落ち着いていたものの発売時のご祝儀価格を超える急激な暴騰
肝心のグラボ(GPU)については元々日本国内はASK税やASKレートと言われる代理店のマージンがかなり大きく取られており海外との価格差が大きかった
ハイエンドのRTX4090は昨年夏頃に最安で25万円前後のものもあったが輸出規制の関係で海外客が購入しまくったと言われ在庫不足で最低ラインのものでも軽く30万を軽く超える事態に。一旦収まったが社会情勢によるものもあり現在また値上がり中（30万円〜）
ちょっと特殊だがロープロファイルの4060などはG社のものが実売5万円前後（実質で4万の時もあり）だったがほとんどの店で在庫がなくなり最近発売された後発のA社のものは店頭価格が6万円超となった。2024年末に出ると言われているRTX5090はVRAM32GB版が予定されており国内ではグラボ単体で50万円とかいう噂も出るほど
戦争や台湾地震、アメリカのインフレなどにより国内価格が高騰し続けているもののいきなり円高へ振れることもあるため正直将来の話は誰にもわからない
しかし2024/4から多くのパーツの価格改定（大幅上昇）が入ったのは事実であり正直今買うのは心情的にキツイものがある

それでもローカルにしか出来ないこと（外では生成や公開できない児ポ系や版権的にアウトなキャラや画風生成、世間的にマニアックなためNAIでは作成できないようなニッチな性癖やキャラ愛）などが多くローカルにこだわらざるを得ない場合が多いのも現状

そのためにもう一つローカル生成の壁になるかもしれないのが生成するためのソフトウェア等を自分でPCにインストールする必要があること
コマンドラインを使うことがあるためPC赤ちゃんにはちょいと厳しいかもしれない
最近はDLしてbatファイル実行するだけでええもんを作ってくれてる[[Zuntan03ニキ>https://github.com/Zuntan03/EasySdxlWebUi]]やLoRA作成のハードルかなり下げてくれた[[RedRayzニキ>https://github.com/RedRayz/Kohya_lora_param_gui]]もいて以前に比べると相当簡単になったが知ってて当たり前的なPC知識前提なため初PC赤ちゃんには厳しいかもしれんない
説明通りやってるはずでも回線不調やサーバー側の不調でエラーが出たり前提ソフトのバージョンや他のソフトとの兼ね合いでエラーが出たりすることもあり、ここやとしあきのwikiのFAQを参考にして欲しい（としあきのとこは直リンはアカンからググってくれ）
（初期の編集者のワイちゃんは浦島太郎だったため旧環境の旧バージョンが残っており一見うまくいってそうなのに結構エラーが出て苦労した）

とりあえず赤ちゃん＆浦島太郎むけに現状書いてみたが、''ローカル環境で一番使われてるのは多分Stable Diffusion WebUI''
ブラウザから操作できるんで直感的にいじりやすいのと拡張機能が多くweb上にも解説が多い
その''派生版でforge版もあってPCのスペックがキツイっていうニキに人気''がある。VRAM使用を効率化することで少ないVRAMでも高速に生成できるようになっているとのこと。ただし本家の機能が追いついた場合にはforge版は更新をやめると作者が明言している。
この二つについてはImpressの記事のリンクからサクッとインストールできるはずなので便利

またもう一つ人気があるComfyUIはかなり細かく生成時のパラメーターとかいじれるが、ちょっととっつきにくいため気になるニキはこの[[ASCIIの記事>https://ascii.jp/elem/000/004/184/4184300/]]見て参考にして欲しい

ここまで来て何かしら画像を生成できたら赤ちゃんからハイハイへの大きな一歩や！
ここやとしあきのwikiを見ながらLet's生成Lifeや！
基本的なpromptはここにあるもんで大体行けるで〜特殊性へ気になるとスレに知っているニキがいるかもしれん

-一歩を踏み出したニキへのお願い
-生成画像にはプロンプト内容やモデル、seedなどの生成情報が埋め込まれています
サンイチ画像貼りやうちの娘自慢貼り、ネタ画像貼りなどでこの情報が画像に残っていると結構参考にするニキが多いので（モロ名前が入った画風LoRA等グレーな場合を除いて）残したままあぷろだに貼ってくれるとうれしいのです
ただ、モザイクを入れる際に一般的なペイントソフトではこの情報が消えてしまいます。一応消えないとしあき製モザイクツールがあるのですが現在公開されていないようです。
スレで誰か持ってない？って聞いたら誰かがupってくれるかもしれません（他力本願）
-あぷろだにimgurはできるだけ避けてください。現在5ch（もちろんなんUの本スレも）が悪質な荒らしの被害を受けています。荒らしスクリプトがグロ画像を貼るが決まってimgurなためスレではimgurをあぼーんしているニキが多く誰も見てくれない事態となる恐れがあります
また最近のimgurは肌色画像を速効AI判定して削除しているようです。さらに海外なので児ポなんかはやべーはずです。
-生成画像はデフォではpng形式ですがファイルサイズが大きめになります。1024*1024で2MB程度
今時のヤングにはどうってことのないサイズですがFDDに入りきれないサイズです（おっさん感）何千何百という画像が貼られるのでよく利用されるcatbox（通称猫箱）などは鯖が結構重くなっているようです。これをwebpやjpgで保存するようにWebUIで設定することで約1/10程度のサイズになります。画像を貼る際にはそちらを利用した方が専ブラなどで画像を見る際にもかなり速くなります。
-困ったときは？
まずはここととしあきのFAQ、プロンプト相談なんかはスレで結構教えてもらえます
構図や表情など一般的な英単語はここにあるようなもので大体e621でも共通です
特殊性癖がらみになるとe621で調べるしか無いかも
