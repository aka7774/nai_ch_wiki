#contents

* 概要
Automatic1111の拡張機能以外で動作するローカル用のプラグインやDCCツールもではじめたのでページを作成しました。

* アップローダー

** Huggingface Hub

https://huggingface.co/models

- モデル用なら最強
- Private設定も出来るけど基本的には公開される(検索対象になる)

** ギガファイル便

https://gigafile.nu/

- 遅いのでモデルには向かない。
- 日数制限があって消える。

** MEGA

https://mega.io/

- ダウンロード5GB制限がある。
- 速度はわりといい。

** Civitai

https://civitai.com/

- いろんなモデルがある
- ダウンロードに会員登録が必要

** kioskloud

https://kioskloud.xyz/

kioskloudがオススメやけど最初が面倒か

** pixeldrain

https://pixeldrain.com/

海外ではこのアップローダーなんかモデル配布で使われてたりするやな
制限は週に20GBまでだから問題ないだろう 


* 任意の.ckptと.safetensorsを相互変換するやつ_v5

最新版はこれ
https://colab.research.google.com/drive/1KUz8TLKRtRzO7GyJNzQsE_wgD-TzDoqU

改良点
- 破損した CLIP を修復する機能を追加しました
- VAE をモデルにマージする機能を追加しました
- モデルを prune して更に軽量化する機能を追加しました

これらの機能を利用して Anything-V3.0.ckpt を Anything-V3.0-pruned-fp16.safetensors に変換することができます（生成結果は本家と完全に一致します）


: 巨大モデル対応 | 標準の ~12GB ランタイムの場合 ~10GB までのモデルが変換可能や
: fp16化対応 | fp16 として保存することで RAM とストレージを節約 (学習には不向きやけど生成画像は同一)
: 簡単DL | Drive や&#129303;からカンマ区切りで任意個のモデルを取得できる
: 簡単Save | 直接 Google Drive に保存可能
: SD2.x対応 | SD2.x系モデル用の yaml も同時に {ckpt 用 / safetensors 用 / それぞれの fp16 版用} へ変換できる

[[ここ>>https://colab.research.google.com/drive/1SIJaNrt-LzBWgDY44vPvuvUlwnjJ9a5-]]にアクセスしてログインするだけで使えるで
中身を改造したい場合は、リンク先画面上部の【ファイル】>【ドライブにコピーを保存】で好きなだけ弄れるようになるで

[+](旧バージョン)潜在的に危険な.ckptを安全な.safetensorsに変換するColab用Notebook
手順1. これをダウンロードする https://75.gigafile.nu/0330-c82660f0f62e26714f340e511377b763c
　パスワード=スレタイ英4文字
手順2. Google Driveを開く https://drive.google.com/drive/u/0/my-drive
　ログイン必須
手順3. ダウンロードしたものをGoogle Driveにドラッグ&ドロップしてダブルクリック
　後は中身を読めば分かるようになっている
[END]

* DCCツール

** openOutpaint
Web UI とは別に起動してアウトペイントするツール
- zero01101/openOutpaint: local offline javascript and html canvas outpainting gizmo for stable diffusion webUI API &#128032; - https://github.com/zero01101/openOutpaint
導入ガイドは以下を参照
- SBS Guided Example &#183; zero01101/openOutpaint Wiki - https://github.com/zero01101/openOutpaint/wiki/SBS-Guided-Example

* スクリプト

** fix_postion_ids.py: マージモデルの破損修復
マージされたモデルが破損する問題を修復するスクリプト。階層マージ拡張機能の作者製
こんな感じで調査したり、修復してモデルを出力できる。
https://files.catbox.moe/ez1pqp.webp
pytorch と safetensors.torch を pip で入れてないと動かない。os と argparse は Python の標準ライブラリ。

***コマンド例
調査
=|BSH|
python fix_position_ids.py --model E:\tool\sd\model_sd\need_fix\Elysium_Anime_V3.safetensors --verbose
||=
修復
=|BSH|
python fix_position_ids.py --model E:\tool\sd\model_sd\need_fix\Elysium_Anime_V3.safetensors --out E:\tool\sd\model_sd\need_fix\Elysium_Anime_V3_fix.safetensors
||=
ちなみにマージモデルの破損問題は、マージするときに float16 のチェックを入れてモデルを生成すると回避できるらしい。

** Config-Preset
- プリセット値の構成可能なドロップダウンを使用して、Web UI の txt2img タブと img2img タブの設定をすばやく変更｜Zyin055/Config-Presets: Script for Automatic1111 - [https://github.com/Zyin055/Config-Presets]

* プラグイン

** Krita
インストールは原則 Install Guide のとおりにやればいけるはず
- https://github.com/Interpause/auto-sd-paint-ext/wiki/Install-Guide 

以下は↑とほぼ同じことが書いてあるが、詳細なインストール方法については別記事を参照
※ AUTOMATIC Web UI がインストール済みであることを前提とする

[[auto-sd-paint-ext のインストール]]

** Photoshop

* 学習

**学習用タグの入力を速く楽にするやつ
https://fate.5ch.net/test/read.cgi/liveuranus/1680673605/124
https://uploader.cc/s/facw8gzhellfpv56b8unz3iprmql5wyjfy7atxiy9xnx23284x2ut1836vwqwa5u.zip
=|BOX|
122 名前：今、天王星のwiki見てきたら軌道傾斜角(i) が0.774°だった (ﾜｯﾁｮｲ ff2b-ejsh)[sage] 投稿日：2023/04/05(水) 18:01:31.11 ID:FWEn7wkM0
「学習用タグの入力を速く楽にするやつ」がロダから消えてリンク切れになっとる
へるぷみー
124 名前：今、天王星のwiki見てきたら軌道傾斜角(i) が0.774°だった (ﾜｯﾁｮｲ dfe8-kVuH)[sage] 投稿日：2023/04/05(水) 18:13:41.49 ID:hvtBrqzV0
>>122
消えんとこにあげればええんやろけど取り敢えず
ファイル名の途中にjpgとか入ってるとエラー出てたの修正版
https://uploader.cc/s/facw8gzhellfpv56b8unz3iprmql5wyjfy7atxiy9xnx23284x2ut1836vwqwa5u.zip
||=


** Kohya_lora_param_gui
https://github.com/RedRayz/Kohya_lora_param_gui
- sd-scriptsのパラメーター設定をGUIで出来るようにするもの。

train_network.pyでのLoRA学習専用。
あと更新してもスレで報告しない時あるんで悪しからず。

[+]
https://fate.5ch.net/test/read.cgi/liveuranus/1680004431/740
=|BOX|
740 名前：今、天王星のwiki見てきたら軌道傾斜角(i) が0.774°だった (ﾜｯﾁｮｲ 0638-Ahwc)[] 投稿日：2023/03/30(木) 02:00:06.00 ID:5Q8D9xj/0
GUIにベンチマークモードとLoraのConv2dの学習オプション追加したで
単にaccelerateのコマンド打ってから終わるまで時間計るだけやが
https://github.com/RedRayz/Kohya_lora_param_gui/releases/tag/v1.2.1
||=
https://fate.5ch.net/test/read.cgi/liveuranus/1680488767/744
=|BOX|
744 名前：今、天王星のwiki見てきたら軌道傾斜角(i) が0.774°だった (ﾜｯﾁｮｲ ff38-P8lD)[] 投稿日：2023/04/04(火) 21:39:07.50 ID:qkV98myi0 [2/3]
LoRA学習GUIで層別学習できるようにしたで
https://github.com/RedRayz/Kohya_lora_param_gui/releases/tag/v1.3.0
||=
https://fate.5ch.net/test/read.cgi/liveuranus/1680488767/784
=|BOX|
784 名前：今、天王星のwiki見てきたら軌道傾斜角(i) が0.774°だった (ﾜｯﾁｮｲ ff38-P8lD)[] 投稿日：2023/04/04(火) 23:27:55.07 ID:qkV98myi0 [3/3]
>>761
>>763
バーの行間詰めてシャットダウン機能の追加した
https://github.com/RedRayz/Kohya_lora_param_gui/releases/tag/v1.3.1
||=
https://fate.5ch.net/test/read.cgi/liveuranus/1681611826/848
https://github.com/RedRayz/Kohya_lora_param_gui/releases/tag/v1.4.1
=|BOX|
848 名前：今、天王星のwiki見てきたら軌道傾斜角(i) が0.774°だった (ﾜｯﾁｮｲ bf38-VD7n)[] 投稿日：2023/04/17(月) 22:20:18.26 ID:0VKIe4U90
LoRA学習GUI更新した
lokrとia3とDyLoRAを選択できるようになったで
https://github.com/RedRayz/Kohya_lora_param_gui/releases/tag/v1.4.1
||=
https://fate.5ch.net/test/read.cgi/liveuranus/1683672268/533
https://github.com/RedRayz/Kohya_lora_param_gui/releases/tag/v1.5.3
=|BOX|
533 名前：今、天王星のwiki見てきたら軌道傾斜角(i) が0.774°だった (ﾜｯﾁｮｲ 1e38-b2Jm)[] 投稿日：2023/05/10(水) 23:54:46.82 ID:RYete8yh0
LoRA学習GUIの更新したよ
https://github.com/RedRayz/Kohya_lora_param_gui/releases/tag/v1.5.3
新オプティマイザ、Min-SNR Gamma、Multiresなんとかの指定できるようになった

https://i.imgur.com/98tvN60.png
||=
[[&ref(https://image01.seesaawiki.jp/n/h/nai_ch/rzmSrqybw8-s.png)>https://image01.seesaawiki.jp/n/h/nai_ch/rzmSrqybw8.png]]
[END]
https://fate.5ch.net/test/read.cgi/liveuranus/1683672268/910
https://github.com/RedRayz/Kohya_lora_param_gui/releases/tag/v1.5.31
=|BOX|
887 名前：今、天王星のwiki見てきたら軌道傾斜角(i) が0.774°だった (ｵｯﾍﾟｹ Src7-zOeB)[sage] 投稿日：2023/05/11(木) 15:18:33.22 ID:3R90fCCOr [1/2]
>>533
いつも使わせて貰っています
https://i.imgur.com/8WISrKt.png
ある条件下でconv_block_dimsの前にスペースが入らずにエラーになってしまうことあるので見ていただけ無いでしょうか？
恐らくTrainForm.csのUseBlockWeightとUseBlockDimが共にTrueの際にスペースが入らなくなるような気がしています

910 名前：今、天王星のwiki見てきたら軌道傾斜角(i) が0.774°だった (ﾜｯﾁｮｲ 1e38-b2Jm)[] 投稿日：2023/05/11(木) 15:52:14.93 ID:ljDhH31T0 [2/2]
>>887
修正した
すまんやで
https://github.com/RedRayz/Kohya_lora_param_gui/releases/tag/v1.5.31
||=

* ハードウェア関係
** HWMonitor
https://www.cpuid.com/softwares/hwmonitor.html

GPUの温度が高くなりすぎると性能劣化や故障の原因になるので、それを監視できるツール。
タスクマネージャーでもGPU温度は表示されるが、グラボの中央など1か所固定の温度しか表示されない。
このソフトならhot spot（グラボ全体で一番高熱になっている場所）の温度が取れるので、この数値を基準に考えるべき。
[[GPU-Z>https://www.techpowerup.com/gpuz/]] でも同じ情報が得られる。

** MSI Afterburner
https://www.msi.com/Landing/afterburner/graphics-cards

高熱になりすぎないようにパワーリミットをかけられるなど、グラボの挙動を変更できるツール。
また、最近のグラボは高々数%の性能向上のために電力をドカ食いする傾向があるので、節電ツールとしても使える。
（人によっては50%まで落としても数%のパフォーマンス低下で済んだという報告もあり。各自で測ってみよう）
パワーリミットをかけるには、FAN欄のPOWER LIMITの数値を変更して使用する。適用ボタンを押すのを忘れずに。

* その他

** PNG Infoを維持したままPNGをJPEGに変換するツール
https://fate.5ch.net/test/read.cgi/liveuranus/1680488767/148
https://mega.nz/folder/uY42VJZa#7Hh0vTvhpa3poL_gNgzipg
=|BOX|
148 名前：今、天王星のwiki見てきたら軌道傾斜角(i) が0.774°だった (ﾜｯﾁｮｲ 7f04-CAqR)[sage] 投稿日：2023/04/03(月) 15:34:05.12 ID:CsCA9lKv0
前スレでリクエストのあった
PNG Infoを維持したままPNGをJPEGに変換するツール
公開したで
フォルダごとダウンロードして使ってくれ
半分ChatGPTに聞きながら作ったけど間違ってるソースをドヤ顔で提示してくるから困ったもんやで
https://mega.nz/folder/uY42VJZa#7Hh0vTvhpa3poL_gNgzipg

||=

